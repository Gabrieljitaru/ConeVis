<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Opportunity</title>
    <link rel="stylesheet" href="jobPage.css">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <div include-html="navbaropp.html"></div>

    <div class="job-secondcontainer">
        <div class="job-image">
            <img src="" alt="Job Image" id="image">
        </div>
        <div class="job-container">
            <div class="job-details">
                <h1 id="job-title"></h1>
                <div class="job-info">
                    <p id="job-salary"></p>
                    <p id="job-hours"></p>
                    <p id="job-location"></p>
                </div>
                <div class="about-company">
                    <h2>About the company</h2>
                    <p id="about-company"></p>
                </div>
                <div class="job-description">
                    <h2>Work</h2>
                    <p id="job-description"></p>
                </div>
                <div class="job-requirements">
                    <h2>We are looking for someone who:</h2>
                    <ul id="job-requirements"></ul>
                </div>
                <div class="call-to-action">
                    <p>Is this something for you?</p>
                    <div class="buttons">
                        <button class="apply-btn">Apply</button>
                        <button class="contact-btn">Contact</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    </div>
    <script src="js/translations.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Initialize Firebase (use your config)
        const firebaseConfig = {
            apiKey: "AIzaSyB3lGuUiHG3wxrzKf6cPfD50xgt60dbqAg",
            authDomain: "conevishs.firebaseapp.com",
            databaseURL: "https://conevishs-default-rtdb.firebaseio.com",
            projectId: "conevishs",
            storageBucket: "conevishs.appspot.com",
            messagingSenderId: "920921649335",
            appId: "1:920921649335:web:4c7918cd0d8bce86cadd32",
            measurementId: "G-ZNK22L4J98"
        };
        firebase.initializeApp(firebaseConfig);

        // Function to get URL parameters
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Load job data from Firebase
        function loadJobData() {
            const jobId = getQueryParam('id'); // Get the job ID from the URL
            const dbRef = firebase.database().ref('offerte-di-lavoro/' + jobId);
            dbRef.once('value', (snapshot) => {
                const job = snapshot.val();
                if (job) {
                    // Update the page with job data
                    document.getElementById('image').src = job.immagine; // Update job image
                    document.getElementById('job-title').innerText = job.titolo; // Update job title
                    document.getElementById('job-salary').innerText = job.salario + ' € per hour'; // Update salary
                    document.getElementById('job-hours').innerText = job.oreSettimanali + ' hours per week'; // Update hours
                    document.getElementById('job-location').innerText = job.località; // Update location
                    document.getElementById('about-company').innerText = job.azienda; // Update company description
                    document.getElementById('job-description').innerText = job.descrizione; // Update job description

                    // Update job requirements
                    const requirementsList = document.getElementById('job-requirements');
                    requirementsList.innerHTML = ''; // Clear existing requirements
                    job.requisiti.forEach(req => {
                        const li = document.createElement('li');
                        li.innerText = req;
                        requirementsList.appendChild(li);
                    });
                } else {
                    // Handle the case where the job is not found
                    document.getElementById('job-container').innerText = 'Job not found.';
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadJobData(); // Load job data when the page is ready
        });
    </script>
</body>

</html>